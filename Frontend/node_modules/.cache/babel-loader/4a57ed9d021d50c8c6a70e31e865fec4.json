{"ast":null,"code":"/**\n * @module ol/renderer/canvas/Map\n */\nimport { create as createTransform, apply as applyTransform, compose as composeTransform } from '../../transform.js';\nimport { includes, stableSort } from '../../array.js';\nimport { CLASS_UNSELECTABLE } from '../../css.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { visibleAtResolution } from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport { rotateAtOffset } from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport MapRenderer, { sortByZIndex } from '../Map.js';\nimport SourceState from '../../source/State.js';\n\n/**\n * @type {Array<typeof import(\"../Layer.js\").default>}\n */\nexport var layerRendererConstructors = [];\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nvar CanvasMapRenderer = /*@__PURE__*/function (MapRenderer) {\n  function CanvasMapRenderer(map) {\n    MapRenderer.call(this, map);\n    var container = map.getViewport();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = this.context_.canvas;\n    this.canvas_.style.width = '100%';\n    this.canvas_.style.height = '100%';\n    this.canvas_.style.display = 'block';\n    this.canvas_.className = CLASS_UNSELECTABLE;\n    container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = createTransform();\n  }\n  if (MapRenderer) CanvasMapRenderer.__proto__ = MapRenderer;\n  CanvasMapRenderer.prototype = Object.create(MapRenderer && MapRenderer.prototype);\n  CanvasMapRenderer.prototype.constructor = CanvasMapRenderer;\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  CanvasMapRenderer.prototype.dispatchRenderEvent = function dispatchRenderEvent(type, frameState) {\n    var map = this.getMap();\n    var context = this.context_;\n    if (map.hasListener(type)) {\n      var extent = frameState.extent;\n      var pixelRatio = frameState.pixelRatio;\n      var viewState = frameState.viewState;\n      var rotation = viewState.rotation;\n      var transform = this.getTransform(frameState);\n      var vectorContext = new CanvasImmediateRenderer(context, pixelRatio, extent, transform, rotation);\n      var composeEvent = new RenderEvent(type, vectorContext, frameState, context, null);\n      map.dispatchEvent(composeEvent);\n    }\n  };\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  CanvasMapRenderer.prototype.getTransform = function getTransform(frameState) {\n    var viewState = frameState.viewState;\n    var dx1 = this.canvas_.width / 2;\n    var dy1 = this.canvas_.height / 2;\n    var sx = frameState.pixelRatio / viewState.resolution;\n    var sy = -sx;\n    var angle = -viewState.rotation;\n    var dx2 = -viewState.center[0];\n    var dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasMapRenderer.prototype.renderFrame = function renderFrame(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.canvas_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n    var context = this.context_;\n    var pixelRatio = frameState.pixelRatio;\n    var width = Math.round(frameState.size[0] * pixelRatio);\n    var height = Math.round(frameState.size[1] * pixelRatio);\n    if (this.canvas_.width != width || this.canvas_.height != height) {\n      this.canvas_.width = width;\n      this.canvas_.height = height;\n    } else {\n      context.clearRect(0, 0, width, height);\n    }\n    var rotation = frameState.viewState.rotation;\n    this.calculateMatrices2D(frameState);\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n    var layerStatesArray = frameState.layerStatesArray;\n    stableSort(layerStatesArray, sortByZIndex);\n    if (rotation) {\n      context.save();\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n    var viewResolution = frameState.viewState.resolution;\n    var i, ii;\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      var layerState = layerStatesArray[i];\n      var layer = layerState.layer;\n      var layerRenderer = /** @type {import(\"./Layer.js\").default} */this.getLayerRenderer(layer);\n      if (!visibleAtResolution(layerState, viewResolution) || layerState.sourceState != SourceState.READY) {\n        continue;\n      }\n      if (layerRenderer.prepareFrame(frameState, layerState)) {\n        layerRenderer.composeFrame(frameState, layerState, context);\n      }\n    }\n    if (rotation) {\n      context.restore();\n    }\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n    if (!this.renderedVisible_) {\n      this.canvas_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n    this.scheduleRemoveUnusedLayerRenderers(frameState);\n    this.scheduleExpireIconCache(frameState);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasMapRenderer.prototype.forEachLayerAtPixel = function forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    var result;\n    var viewState = frameState.viewState;\n    var viewResolution = viewState.resolution;\n    var layerStates = frameState.layerStatesArray;\n    var numLayers = layerStates.length;\n    var coordinate = applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n    var i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      var layerState = layerStates[i];\n      var layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        var layerRenderer = /** @type {import(\"./Layer.js\").default} */this.getLayerRenderer(layer);\n        result = layerRenderer.forEachLayerAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg);\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasMapRenderer.prototype.registerLayerRenderers = function registerLayerRenderers(constructors) {\n    MapRenderer.prototype.registerLayerRenderers.call(this, constructors);\n    for (var i = 0, ii = constructors.length; i < ii; ++i) {\n      var ctor = constructors[i];\n      if (!includes(layerRendererConstructors, ctor)) {\n        layerRendererConstructors.push(ctor);\n      }\n    }\n  };\n  return CanvasMapRenderer;\n}(MapRenderer);\nexport default CanvasMapRenderer;","map":{"version":3,"names":["create","createTransform","apply","applyTransform","compose","composeTransform","includes","stableSort","CLASS_UNSELECTABLE","createCanvasContext2D","visibleAtResolution","RenderEvent","RenderEventType","rotateAtOffset","CanvasImmediateRenderer","MapRenderer","sortByZIndex","SourceState","layerRendererConstructors","CanvasMapRenderer","map","call","container","getViewport","context_","canvas_","canvas","style","width","height","display","className","insertBefore","childNodes","renderedVisible_","transform_","dispatchRenderEvent","type","frameState","getMap","context","hasListener","extent","pixelRatio","viewState","rotation","transform","getTransform","vectorContext","composeEvent","dispatchEvent","dx1","dy1","sx","resolution","sy","angle","dx2","center","dy2","renderFrame","Math","round","size","clearRect","calculateMatrices2D","PRECOMPOSE","layerStatesArray","save","viewResolution","i","ii","length","layerState","layer","layerRenderer","getLayerRenderer","sourceState","READY","prepareFrame","composeFrame","restore","POSTCOMPOSE","scheduleRemoveUnusedLayerRenderers","scheduleExpireIconCache","forEachLayerAtPixel","pixel","hitTolerance","callback","thisArg","layerFilter","thisArg2","result","layerStates","numLayers","coordinate","pixelToCoordinateTransform","slice","forEachLayerAtCoordinate","undefined","registerLayerRenderers","constructors","prototype","ctor","push"],"sources":["../../../../src/ol/renderer/canvas/Map.js"],"sourcesContent":["/**\n * @module ol/renderer/canvas/Map\n */\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\nimport {includes, stableSort} from '../../array.js';\nimport {CLASS_UNSELECTABLE} from '../../css.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {visibleAtResolution} from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport MapRenderer, {sortByZIndex} from '../Map.js';\nimport SourceState from '../../source/State.js';\n\n\n/**\n * @type {Array<typeof import(\"../Layer.js\").default>}\n */\nexport const layerRendererConstructors = [];\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nclass CanvasMapRenderer extends MapRenderer {\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super(map);\n\n    const container = map.getViewport();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = this.context_.canvas;\n\n    this.canvas_.style.width = '100%';\n    this.canvas_.style.height = '100%';\n    this.canvas_.style.display = 'block';\n    this.canvas_.className = CLASS_UNSELECTABLE;\n    container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = createTransform();\n\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    const context = this.context_;\n    if (map.hasListener(type)) {\n      const extent = frameState.extent;\n      const pixelRatio = frameState.pixelRatio;\n      const viewState = frameState.viewState;\n      const rotation = viewState.rotation;\n\n      const transform = this.getTransform(frameState);\n\n      const vectorContext = new CanvasImmediateRenderer(context, pixelRatio,\n        extent, transform, rotation);\n      const composeEvent = new RenderEvent(type, vectorContext,\n        frameState, context, null);\n      map.dispatchEvent(composeEvent);\n    }\n  }\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getTransform(frameState) {\n    const viewState = frameState.viewState;\n    const dx1 = this.canvas_.width / 2;\n    const dy1 = this.canvas_.height / 2;\n    const sx = frameState.pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const angle = -viewState.rotation;\n    const dx2 = -viewState.center[0];\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState) {\n\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.canvas_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const context = this.context_;\n    const pixelRatio = frameState.pixelRatio;\n    const width = Math.round(frameState.size[0] * pixelRatio);\n    const height = Math.round(frameState.size[1] * pixelRatio);\n    if (this.canvas_.width != width || this.canvas_.height != height) {\n      this.canvas_.width = width;\n      this.canvas_.height = height;\n    } else {\n      context.clearRect(0, 0, width, height);\n    }\n\n    const rotation = frameState.viewState.rotation;\n\n    this.calculateMatrices2D(frameState);\n\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n\n    const layerStatesArray = frameState.layerStatesArray;\n    stableSort(layerStatesArray, sortByZIndex);\n\n    if (rotation) {\n      context.save();\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n\n    const viewResolution = frameState.viewState.resolution;\n    let i, ii;\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      const layer = layerState.layer;\n      const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layer));\n      if (!visibleAtResolution(layerState, viewResolution) ||\n          layerState.sourceState != SourceState.READY) {\n        continue;\n      }\n      if (layerRenderer.prepareFrame(frameState, layerState)) {\n        layerRenderer.composeFrame(frameState, layerState, context);\n      }\n    }\n\n    if (rotation) {\n      context.restore();\n    }\n\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n\n    if (!this.renderedVisible_) {\n      this.canvas_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.scheduleRemoveUnusedLayerRenderers(frameState);\n    this.scheduleExpireIconCache(frameState);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    let result;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform, pixel.slice());\n\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layer));\n        result = layerRenderer.forEachLayerAtCoordinate(\n          coordinate, frameState, hitTolerance, callback, thisArg);\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  registerLayerRenderers(constructors) {\n    super.registerLayerRenderers(constructors);\n    for (let i = 0, ii = constructors.length; i < ii; ++i) {\n      const ctor = constructors[i];\n      if (!includes(layerRendererConstructors, ctor)) {\n        layerRendererConstructors.push(ctor);\n      }\n    }\n  }\n}\n\n\nexport default CanvasMapRenderer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}