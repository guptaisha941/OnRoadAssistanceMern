{"ast":null,"code":"/**\n * @module ol/pointer/MsSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n/**\n * @const\n * @type {Array<string>}\n */\nvar POINTER_TYPES = ['', 'unavailable', 'touch', 'pen', 'mouse'];\n\n/**\n * Handler for `msPointerDown`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerDown(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n}\n\n/**\n * Handler for `msPointerMove`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerMove(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n}\n\n/**\n * Handler for `msPointerUp`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerUp(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msPointerOut`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOut(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n}\n\n/**\n * Handler for `msPointerOver`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOver(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n}\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerCancel(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msLostPointerCapture(inEvent) {\n  var e = this.dispatcher.makeEvent('lostpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msGotPointerCapture(inEvent) {\n  var e = this.dispatcher.makeEvent('gotpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\nvar MsSource = /*@__PURE__*/function (EventSource) {\n  function MsSource(dispatcher) {\n    var mapping = {\n      'MSPointerDown': msPointerDown,\n      'MSPointerMove': msPointerMove,\n      'MSPointerUp': msPointerUp,\n      'MSPointerOut': msPointerOut,\n      'MSPointerOver': msPointerOver,\n      'MSPointerCancel': msPointerCancel,\n      'MSGotPointerCapture': msGotPointerCapture,\n      'MSLostPointerCapture': msLostPointerCapture\n    };\n    EventSource.call(this, dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, MSPointerEvent|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n  }\n  if (EventSource) MsSource.__proto__ = EventSource;\n  MsSource.prototype = Object.create(EventSource && EventSource.prototype);\n  MsSource.prototype.constructor = MsSource;\n\n  /**\n   * Creates a copy of the original event that will be used\n   * for the fake pointer event.\n   *\n   * @private\n   * @param {MSPointerEvent} inEvent The in event.\n   * @return {Object} The copied event.\n   */\n  MsSource.prototype.prepareEvent_ = function prepareEvent_(inEvent) {\n    /** @type {MSPointerEvent|Object} */\n    var e = inEvent;\n    if (typeof inEvent.pointerType === 'number') {\n      e = this.dispatcher.cloneEvent(inEvent, inEvent);\n      e.pointerType = POINTER_TYPES[inEvent.pointerType];\n    }\n    return e;\n  };\n\n  /**\n   * Remove this pointer from the list of active pointers.\n   * @param {number} pointerId Pointer identifier.\n   */\n  MsSource.prototype.cleanup = function cleanup(pointerId) {\n    delete this.pointerMap[pointerId.toString()];\n  };\n  return MsSource;\n}(EventSource);\nexport default MsSource;","map":{"version":3,"names":["EventSource","POINTER_TYPES","msPointerDown","inEvent","pointerMap","pointerId","toString","e","prepareEvent_","dispatcher","down","msPointerMove","move","msPointerUp","up","cleanup","msPointerOut","leaveOut","msPointerOver","enterOver","msPointerCancel","cancel","msLostPointerCapture","makeEvent","dispatchEvent","msGotPointerCapture","MsSource","mapping","call","pointerType","cloneEvent"],"sources":["../../../src/ol/pointer/MsSource.js"],"sourcesContent":["/**\n * @module ol/pointer/MsSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst POINTER_TYPES = [\n  '',\n  'unavailable',\n  'touch',\n  'pen',\n  'mouse'\n];\n\n/**\n * Handler for `msPointerDown`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerDown(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n}\n\n/**\n * Handler for `msPointerMove`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerMove(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n}\n\n/**\n * Handler for `msPointerUp`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerUp(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msPointerOut`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOut(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n}\n\n/**\n * Handler for `msPointerOver`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOver(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n}\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerCancel(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msLostPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('lostpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msGotPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('gotpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\nclass MsSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'MSPointerDown': msPointerDown,\n      'MSPointerMove': msPointerMove,\n      'MSPointerUp': msPointerUp,\n      'MSPointerOut': msPointerOut,\n      'MSPointerOver': msPointerOver,\n      'MSPointerCancel': msPointerCancel,\n      'MSGotPointerCapture': msGotPointerCapture,\n      'MSLostPointerCapture': msLostPointerCapture\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, MSPointerEvent|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n  }\n\n  /**\n   * Creates a copy of the original event that will be used\n   * for the fake pointer event.\n   *\n   * @private\n   * @param {MSPointerEvent} inEvent The in event.\n   * @return {Object} The copied event.\n   */\n  prepareEvent_(inEvent) {\n    /** @type {MSPointerEvent|Object} */\n    let e = inEvent;\n    if (typeof inEvent.pointerType === 'number') {\n      e = this.dispatcher.cloneEvent(inEvent, inEvent);\n      e.pointerType = POINTER_TYPES[inEvent.pointerType];\n    }\n\n    return e;\n  }\n\n  /**\n   * Remove this pointer from the list of active pointers.\n   * @param {number} pointerId Pointer identifier.\n   */\n  cleanup(pointerId) {\n    delete this.pointerMap[pointerId.toString()];\n  }\n\n}\n\nexport default MsSource;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,OAAOA,WAAW,MAAM,kBAAkB;;;;;;AAO1C,IAAMC,aAAa,GAAG,CACpB,EAAE,EACF,aAAa,EACb,OAAO,EACP,KAAK,EACL,OAAO,CACR;;;;;;;;AAQD,SAASC,aAAaA,CAACC,OAAO,EAAE;EAC9B,IAAI,CAACC,UAAU,CAACD,OAAO,CAACE,SAAS,CAACC,QAAQ,EAAE,CAAC,GAAGH,OAAO;EACvD,IAAMI,CAAC,GAAG,IAAI,CAACC,aAAa,CAACL,OAAO,CAAC;EACrC,IAAI,CAACM,UAAU,CAACC,IAAI,CAACH,CAAC,EAAEJ,OAAO,CAAC;;;;;;;;;AASlC,SAASQ,aAAaA,CAACR,OAAO,EAAE;EAC9B,IAAMI,CAAC,GAAG,IAAI,CAACC,aAAa,CAACL,OAAO,CAAC;EACrC,IAAI,CAACM,UAAU,CAACG,IAAI,CAACL,CAAC,EAAEJ,OAAO,CAAC;;;;;;;;;AASlC,SAASU,WAAWA,CAACV,OAAO,EAAE;EAC5B,IAAMI,CAAC,GAAG,IAAI,CAACC,aAAa,CAACL,OAAO,CAAC;EACrC,IAAI,CAACM,UAAU,CAACK,EAAE,CAACP,CAAC,EAAEJ,OAAO,CAAC;EAC9B,IAAI,CAACY,OAAO,CAACZ,OAAO,CAACE,SAAS,CAAC;;;;;;;;;AASjC,SAASW,YAAYA,CAACb,OAAO,EAAE;EAC7B,IAAMI,CAAC,GAAG,IAAI,CAACC,aAAa,CAACL,OAAO,CAAC;EACrC,IAAI,CAACM,UAAU,CAACQ,QAAQ,CAACV,CAAC,EAAEJ,OAAO,CAAC;;;;;;;;;AAStC,SAASe,aAAaA,CAACf,OAAO,EAAE;EAC9B,IAAMI,CAAC,GAAG,IAAI,CAACC,aAAa,CAACL,OAAO,CAAC;EACrC,IAAI,CAACM,UAAU,CAACU,SAAS,CAACZ,CAAC,EAAEJ,OAAO,CAAC;;;;;;;;;AASvC,SAASiB,eAAeA,CAACjB,OAAO,EAAE;EAChC,IAAMI,CAAC,GAAG,IAAI,CAACC,aAAa,CAACL,OAAO,CAAC;EACrC,IAAI,CAACM,UAAU,CAACY,MAAM,CAACd,CAAC,EAAEJ,OAAO,CAAC;EAClC,IAAI,CAACY,OAAO,CAACZ,OAAO,CAACE,SAAS,CAAC;;;;;;;;;AASjC,SAASiB,oBAAoBA,CAACnB,OAAO,EAAE;EACrC,IAAMI,CAAC,GAAG,IAAI,CAACE,UAAU,CAACc,SAAS,CAAC,oBAAoB,EAAEpB,OAAO,EAAEA,OAAO,CAAC;EAC3E,IAAI,CAACM,UAAU,CAACe,aAAa,CAACjB,CAAC,CAAC;;;;;;;;;AASlC,SAASkB,mBAAmBA,CAACtB,OAAO,EAAE;EACpC,IAAMI,CAAC,GAAG,IAAI,CAACE,UAAU,CAACc,SAAS,CAAC,mBAAmB,EAAEpB,OAAO,EAAEA,OAAO,CAAC;EAC1E,IAAI,CAACM,UAAU,CAACe,aAAa,CAACjB,CAAC,CAAC;;AAGlC,IAAMmB,QAAQ,GAAoB,uBAAA1B,WAAA;EAKhC,SAAA0B,QAAWA,CAACjB,UAAU,EAAE;IACtB,IAAMkB,OAAO,GAAG;MACd,eAAe,EAAEzB,aAAa;MAC9B,eAAe,EAAES,aAAa;MAC9B,aAAa,EAAEE,WAAW;MAC1B,cAAc,EAAEG,YAAY;MAC5B,eAAe,EAAEE,aAAa;MAC9B,iBAAiB,EAAEE,eAAe;MAClC,qBAAqB,EAAEK,mBAAmB;MAC1C,sBAAsB,EAAEH;KACzB;IACDtB,WAAA,CAAA4B,IAAK,OAACnB,UAAU,EAAEkB,OAAO,CAAC;;;;;;IAM1B,IAAI,CAACvB,UAAU,GAAGK,UAAU,CAACL,UAAU;;;;;;;;;;;;;;qBAWzCI,aAAA,YAAAA,cAAcL,OAAO,EAAE;;IAErB,IAAII,CAAC,GAAGJ,OAAO;IACf,IAAI,OAAOA,OAAO,CAAC0B,WAAW,KAAK,QAAQ,EAAE;MAC3CtB,CAAC,GAAG,IAAI,CAACE,UAAU,CAACqB,UAAU,CAAC3B,OAAO,EAAEA,OAAO,CAAC;MAChDI,CAAC,CAACsB,WAAW,GAAG5B,aAAa,CAACE,OAAO,CAAC0B,WAAW,CAAC;;IAGpD,OAAOtB,CAAC;;;;;;;qBAOVQ,OAAA,YAAAA,QAAQV,SAAS,EAAE;IACjB,OAAO,IAAI,CAACD,UAAU,CAACC,SAAS,CAACC,QAAQ,EAAE,CAAC;GAC7C;;EAlDoBN,WAAA;AAsDvB,eAAe0B,QAAQ"},"metadata":{},"sourceType":"module"}