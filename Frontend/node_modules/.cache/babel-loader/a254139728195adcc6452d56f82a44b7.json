{"ast":null,"code":"/**\n * @module ol/rotationconstraint\n */\nimport { toRadians } from './math.js';\n\n/**\n * @typedef {function((number|undefined), number): (number|undefined)} Type\n */\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  var theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  var tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    }\n  );\n}","map":{"version":3,"names":["toRadians","disable","rotation","delta","undefined","none","createSnapToN","n","theta","Math","PI","floor","createSnapToZero","opt_tolerance","tolerance","abs"],"sources":["../../src/ol/rotationconstraint.js"],"sourcesContent":["/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number): (number|undefined)} Type\n */\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n}\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  const tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    });\n}\n"],"mappings":"AAAA;;;AAGA,SAAQA,SAAS,QAAO,WAAW;;;;;;;;;;;AAanC,OAAO,SAASC,OAAOA,CAACC,QAAQ,EAAEC,KAAK,EAAE;EACvC,IAAID,QAAQ,KAAKE,SAAS,EAAE;IAC1B,OAAO,CAAC;GACT,MAAM;IACL,OAAOA,SAAS;;;;;;;;;AAUpB,OAAO,SAASC,IAAIA,CAACH,QAAQ,EAAEC,KAAK,EAAE;EACpC,IAAID,QAAQ,KAAKE,SAAS,EAAE;IAC1B,OAAOF,QAAQ,GAAGC,KAAK;GACxB,MAAM;IACL,OAAOC,SAAS;;;;;;;;AASpB,OAAO,SAASE,aAAaA,CAACC,CAAC,EAAE;EAC/B,IAAMC,KAAK,GAAG,CAAC,GAAGC,IAAI,CAACC,EAAE,GAAGH,CAAC;EAC7B;;;;;;IAME,UAASL,QAAQ,EAAEC,KAAK,EAAE;MACxB,IAAID,QAAQ,KAAKE,SAAS,EAAE;QAC1BF,QAAQ,GAAGO,IAAI,CAACE,KAAK,CAAC,CAACT,QAAQ,GAAGC,KAAK,IAAIK,KAAK,GAAG,GAAG,CAAC,GAAGA,KAAK;QAC/D,OAAON,QAAQ;OAChB,MAAM;QACL,OAAOE,SAAS;;;EAEnB;;;;;;;AAQL,OAAO,SAASQ,gBAAgBA,CAACC,aAAa,EAAE;EAC9C,IAAMC,SAAS,GAAGD,aAAa,IAAIb,SAAS,CAAC,CAAC,CAAC;EAC/C;;;;;;IAME,UAASE,QAAQ,EAAEC,KAAK,EAAE;MACxB,IAAID,QAAQ,KAAKE,SAAS,EAAE;QAC1B,IAAIK,IAAI,CAACM,GAAG,CAACb,QAAQ,GAAGC,KAAK,CAAC,IAAIW,SAAS,EAAE;UAC3C,OAAO,CAAC;SACT,MAAM;UACL,OAAOZ,QAAQ,GAAGC,KAAK;;OAE1B,MAAM;QACL,OAAOC,SAAS;;;EAEnB"},"metadata":{},"sourceType":"module"}